<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Clase 06 - Programación III - UTN FRA 2022</title>

	<link rel="stylesheet" href="../assets/css/reveal.css">
	<link rel="stylesheet" href="../assets/css/theme/white.css">

	<link rel="stylesheet" href="../assets/lib/css/vs.css">

	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? '../assets/css/print/pdf.css' : '../assets/css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>

</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section class="main white">
				<img src="../assets/img/logo.png" alt="">
				<h1 class="title">Clase 06</h1>
				<h2 class="subtitle">PDO<a href="https://www.php.net/">(PHP Data Object)</a></h2>
				<small><a href="../index.html"> Volver</a></small>
			</section>

			<section class="left">
				<h2><a>Temas:</a></h2>
				<ul class="long-ul">
					<li class="fragment highlight-red">Introducción a PDO</li>
					<li>Conexiones</li>
					<li>Sentencias Preparadas</li>
					<li>PDOStatement</li>
				</ul>
			</section>

			<section class="left">
				<h2>Introducción a <a>PDO</a></h2>
				<p><a>PDO</a> define una interfaz ligera para poder acceder a bases de datos en <a>PHP</a>.</p>
				<p><a>PDO</a> proporciona una capa de abstracción de acceso a datos, independientemente
					de la base de datos que se esté utilizando, se emplean las mismas funciones para realizar consultas
					y obtener datos.</p>
				<p><a>PDO</a> viene con <a>PHP</a> 5.1, y está disponible como una extensión PECL para PHP 5.0</p>
				<p><a>PDO</a> requiere las características nuevas de POO del núcleo de PHP 5, por lo que no se ejecutará
					con
					versiones anteriores de <a>PHP</a>.</p>
			</section>

			<section class="left">
				<h2><a>Temas:</a></h2>
				<ul class="long-ul">
					<li>Introducción a PDO</li>
					<li class="fragment highlight-red">Conexiones</li>
					<li>Sentencias Preparadas</li>
					<li>PDOStatement</li>
				</ul>
			</section>

			<section class="left">
				<h2><a>Conexiones</a></h2>
				<p>Las conexiones se establecen creando instancias de la clase base <a>PDO</a>.</p>
				<p>No importa el controlador que se utilice siempre se usará el nombre de la clase <a>PDO</a>.</p>
				<p>El constructor acepta parámetros para especificar el origen de la base de datos (conocido como DSN)
					y, opcionalmente, el nombre de usuario y la contraseña (si la hubiera).</p>
				<pre class="php">
<code>
	$conStr = "mysql:host=localhost;dbname=pruebaDB";
	$pdo = new PDO($conStr, $user, $pass);
</code>
				</pre>
			</section>

			<section class="left">
				<h2><a>Conexiones</a></h2>
				<p>Si hubieran errores de conexión, se lanzará un objeto <a>PDOException</a>.</p>
				<pre class="php">
<code>
	try {
		$conStr = "mysql:host=localhost; dbname=pruebaDB";
		$pdo = new PDO($conStr, $user, $pass);
	}
	catch(PDOException $e){
		echo "Error: " .$e->getMessage();
	}
</code>
				</pre>
			</section>

			<section class="left">
				<h2><a>Conexiones</a></h2>
				<p>Una vez realizada con éxito una conexión a la base de datos, será devuelta una instancia de la clase
					<a>PDO</a> al script.
				</p>
				<p>La conexión permanecerá activa durante el tiempo de vida del objeto <a>PDO</a>.</p>
				<p>Para cerrar la conexión, es necesario destruir el objeto asegurándose de que todas las referencias a
					él existentes sean eliminadas (esto se puede hacer asignando <a>NULL</a> a la variable que contiene
					el
					objeto).</p>
				<p>Si no se realiza explícitamente, <a>PDO</a> cerrará automáticamente la conexión cuando el script
					finalice.
				</p>
			</section>

			<section>
				<h2 class="title"><a target="_blank" href="https://onlinegdb.com/SgLgRXbCW">DEMO</a>
				</h2>
				<p><a target="_blank" href="https://onlinegdb.com/SgLgRXbCW">https://onlinegdb.com/SgLgRXbCW</a>
				</p>
			</section>

			<section class="left">
				<h2><a>Temas:</a></h2>
				<ul class="long-ul">
					<li>Introducción a PDO</li>
					<li>Conexiones</li>
					<li class="fragment highlight-red">Sentencias Preparadas</li>
					<li>PDOStatement</li>
				</ul>
			</section>

			<section class="left">
				<h2><a>Sentencias Preparadas</a></h2>
				<p>Muchas de las bases de datos más maduras admiten el concepto de sentencias preparadas.</p>
				<p>Estas pueden definirse como un tipo de plantillas compiladas para SQL que las aplicaciones quieren
					ejecutar, pudiendo ser personalizadas utilizando parámetros.</p>
				<p>Las sentencias preparadas ofrecen grandes beneficios:</p>
				<ul class="long-ul">
					<li>La consulta <a>sólo necesita ser analizada</a> (o
						preparada) <a>una vez</a>, pero puede ser ejecutada
						muchas veces con los mismos o diferentes
						parámetros.</li>
				</ul>
			</section>

			<section class="left">
				<h2><a>Sentencias Preparadas</a></h2>
				<ul class="long-ul">
					<li>Cuando la consulta se prepara, la base de datos
						analizará, compilará y optimizará su plan para
						ejecutarla.</li>
					<li>Mediante el empleo de una sentencia preparada, la
						aplicación <a>evita repetir el ciclo</a> de
						análisis/compilación/optimización. Esto significa que
						las sentencias preparadas utilizan <a>menos recursos</a> y
						se ejecutan <a>más rápidamente</a>.</li>
					<li>Los parámetros para las sentencias
						preparadas <a>NO necesitan estar entrecomillados</a>;
						el controlador automáticamente se encarga de
						esto.
					</li>
					<li>Si una aplicación usa exclusivamente sentencias
						preparadas, el desarrollador puede estar seguro de
						que <a>no hay cabida para inyecciones de SQL</a>.</li>
				</ul>
			</section>

			<section class="left">
				<h2><a>Sentencias Preparadas</a></h2>
				<ul class="long-ul">
					<li>Las sentencias preparadas son tan útiles que son
						la única característica que <a>PDO</a> emulará para los
						controladores que no las soporten. Esto asegura
						que una aplicación sea capaz de emplear el
						mismo paradigma de acceso a datos
						independientemente de las capacidades de la
						base de datos.</li>
				</ul>
				<p>Las declaraciones preparadas básicamente funcionan así:</p>
				<ul class="long-ul">
					<li><a>Prepare()</a> - Una plantilla de declaración de <a>SQL</a>
						se crea y se envía a la base de datos. Ciertos
						valores se dejan sin especificar (parámetros).
						(Retorna un objeto de tipo <a>PDOStatement</a>).</li>
				</ul>
			</section>

			<section class="left">
				<h2><a>Sentencias Preparadas</a></h2>
				<ul class="long-ul">
					<li>La base de datos analiza, compila y realiza la
						optimización de consultas en la plantilla y
						almacena el resultado sin ejecutarlo.</li>
					<li><a>Execute()</a> - En un momento posterior, la
						aplicación enlaza ("bindea") los valores a los
						parámetros y la base de datos ejecuta la
						instrucción.</li>
				</ul>
				<pre class="php">
<code>
	// Sentencia preparada sin parámetros
	$sentencia = $pdo->prepare('SELECT * FROM tabla');
	$sentencia->execute();
	// Sentencia preparada con parámetros
	$sentencia = $pdo->prepare('SELECT * FROM tabla WHERE ID = :id');
	$sentencia->execute(array(':id' => 3));
</code>
				</pre>
			</section>

			<section class="left">
				<h2><a>Temas:</a></h2>
				<ul class="long-ul">
					<li>Introducción a PDO</li>
					<li>Conexiones</li>
					<li>Sentencias Preparadas</li>
					<li class="fragment highlight-red">PDOStatement</li>
				</ul>
			</section>

			<section class="left">
				<h2><a>PDOStatement</a></h2>
				<p>Representa una sentencia preparada y, después
					de la ejecución de la instrucción, un conjuntos
					de resultados asociado.</p>
				<p>Posee métodos para vincular (bindear) valores a
					parámetros.</p>
				<p>Posee métodos para obtener los valores de un
					conjunto de resultados.</p>
			</section>

			<section class="left">
				<h2><a>Temas:</a></h2>
				<ul class="long-ul">
					<li>Introducción a PDO</li>
					<li>Conexiones</li>
					<li>Sentencias Preparadas</li>
					<li class="fragment highlight-red">PDOStatement</li>
					<ul class="long-ul">
						<li class="fragment highlight-red">Métodos para vincular</li>
						<li>Métodos para obtener valores</li>
					</ul>
				</ul>
			</section>

			<section class="left">
				<h2><a>PDOStatement</a> - Métodos para vincular</h2>
				<p><a>bindParam()</a> - Vincula una variable de PHP a un parámetro de
					sustitución con nombre o de signo de
					interrogación correspondiente de la sentencia
					SQL que fue usada para preparar la sentencia.</p>
			</section>

			<section>
				<h2 class="title"><a>Dudas ó consultas</a></h2>
			</section>
		</div>
	</div>

	<script src="../assets/lib/js/head.min.js"></script>
	<script src="../assets/js/reveal.js"></script>

	<script>
		// More info about config & dependencies:
		// - https://github.com/hakimel/reveal.js#configuration
		// - https://github.com/hakimel/reveal.js#dependencies
		Reveal.initialize({
			width: 1280,
			height: 720,

			dependencies: [
				{ src: '../assets/plugin/markdown/marked.js' },
				{ src: '../assets/plugin/markdown/markdown.js' },
				{ src: '../assets/plugin/notes/notes.js', async: true },
				{ src: '../assets/plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } }
			]
		});

	</script>

</body>

</html>